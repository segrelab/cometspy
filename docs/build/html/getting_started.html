<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting started &mdash; COMETSpy  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Growth in a test tube" href="test_tube.html" />
    <link rel="prev" title="COMETS Capabilities" href="capabilities.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/cometspy_logo_white_bkgd.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Package Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-is-cometspy">What is COMETSpy?</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#how-to-use-this-documentation">How to use this Documentation:</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#cite-us">Cite Us:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installation-of-comets">Installation of COMETS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="capabilities.html">COMETS Capabilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="capabilities.html#capabilities-in-space">Capabilities in space</a></li>
<li class="toctree-l2"><a class="reference internal" href="capabilities.html#biological-capabilities">Biological capabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="capabilities.html#computational-capabilities">Computational capabilities</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#preparing-a-model-for-comets">Preparing a model for <code class="docutils literal notranslate"><span class="pre">COMETS</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-comets-simulation-parameters">Setting <code class="docutils literal notranslate"><span class="pre">COMETS</span></code> simulation parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#preparing-a-comets-simulation-layout">Preparing a <code class="docutils literal notranslate"><span class="pre">COMETS</span></code> simulation layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-a-comets-simulation">Running a <code class="docutils literal notranslate"><span class="pre">COMETS</span></code> simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#checking-simulation-output-and-possible-errors">Checking simulation output and possible errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#accessing-the-results-of-the-simulation">Accessing the results of the simulation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="test_tube.html">Growth in a test tube</a><ul>
<li class="toctree-l2"><a class="reference internal" href="test_tube.html#loading-the-comets-python-toolbox">Loading the COMETS Python Toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_tube.html#creating-a-test-tube">Creating a test tube</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_tube.html#loading-a-model">Loading a model</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_tube.html#setting-the-simulation-parameters">Setting the simulation parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_tube.html#running-the-simulation">Running the simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_tube.html#analyzing-the-results">Analyzing the results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="competition_assay.html">Two-species competition assay</a><ul>
<li class="toctree-l2"><a class="reference internal" href="competition_assay.html#load-models-and-create-a-mutant">Load models and create a mutant</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition_assay.html#create-layout-add-models-and-set-up-media-composition">Create layout, add models and set up media composition</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition_assay.html#set-up-simulation-parameters">Set up simulation parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition_assay.html#run-the-simulation">Run the simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="competition_assay.html#simulating-serial-transfers">Simulating serial transfers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="citrate.html">Citrate utilization in the Long Term Evolution Experiment.</a></li>
<li class="toctree-l1"><a class="reference internal" href="chemostat.html">Crossfeeding in a chemostat</a></li>
<li class="toctree-l1"><a class="reference internal" href="evolution.html">Simulating evolution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="evolution.html#load-the-model">Load the model</a></li>
<li class="toctree-l2"><a class="reference internal" href="evolution.html#set-up-the-layout">Set up the layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="evolution.html#set-up-simulation-parameters">Set up simulation parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="evolution.html#run-the-simulation">Run the simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="evolution.html#visualize-the-results">Visualize the results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="circular_colony.html">Growth of a circular colony</a></li>
<li class="toctree-l1"><a class="reference internal" href="branching_colony.html">Growth of a branching colony</a></li>
<li class="toctree-l1"><a class="reference internal" href="demographic_noise_two_strains.html">Growth and propagation of bacterial colonies on flat surfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="petri_dish.html">Simulating growth on Petri dish</a></li>
<li class="toctree-l1"><a class="reference internal" href="soil.html">Soil-air interface</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">COMETSpy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Getting started</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/getting_started.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="getting-started">
<h1>Getting started<a class="headerlink" href="#getting-started" title="Link to this heading"></a></h1>
<p>The Comets python module is intended to offer a programatic, easy and intuitive interface to <code class="docutils literal notranslate"><span class="pre">COMETS</span></code>. While it internally uses the same <code class="docutils literal notranslate"><span class="pre">COMETS</span></code> Java engine as always, it replaces the legacy parameter files, simulation layouts or models, bash scripts and output files, by python objects in a single environment, which users deal with to perform simulations and analyze the results.</p>
<p>Any comets simulation starts from a <strong>layout</strong> and a set of <strong>parameters</strong>. The layout specifies the environment (media metabolites, refresh values, periodic dilutions) and the species present in it, that is, the <strong>models</strong>. The parameters specify many simulation characteristics, such as number of iterations, timestep, type of metabolite exchange or whether to record different output logs. Therefore, the two main types of objects are <code class="docutils literal notranslate"><span class="pre">layout</span></code> and <code class="docutils literal notranslate"><span class="pre">params</span></code>. These two are passed to the <code class="docutils literal notranslate"><span class="pre">comets</span></code> class, which perform simulations and contain their output.</p>
<p>In this section, we will walk through the basic functionalities of <code class="docutils literal notranslate"><span class="pre">COMETS</span></code> using the Python Toolbox, and more specific examples of usage will be provided in the next sections.</p>
<section id="preparing-a-model-for-comets">
<h2>Preparing a model for <code class="docutils literal notranslate"><span class="pre">COMETS</span></code><a class="headerlink" href="#preparing-a-model-for-comets" title="Link to this heading"></a></h2>
<p>The class <code class="docutils literal notranslate"><span class="pre">model</span></code> is used to store the genome-scale metabolic models used in <code class="docutils literal notranslate"><span class="pre">COMETS</span></code> simulations. Most frequently, we will first load a model using <code class="docutils literal notranslate"><span class="pre">COBRAPy</span></code>. Then, we can pass it to the <code class="docutils literal notranslate"><span class="pre">COMETS</span></code> <code class="docutils literal notranslate"><span class="pre">model</span></code> class, which allows us to change <code class="docutils literal notranslate"><span class="pre">COMETS</span></code>-specific model parameters, such as initial population sizes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cobra</span>
<span class="kn">import</span> <span class="nn">cobra.test</span>
<span class="kn">import</span> <span class="nn">cometspy</span> <span class="k">as</span> <span class="nn">c</span>

<span class="c1"># Load a textbook example model using the COBRAPy toolbox </span>
<span class="n">test_model</span> <span class="o">=</span> <span class="n">cobra</span><span class="o">.</span><span class="n">test</span><span class="o">.</span><span class="n">create_test_model</span><span class="p">(</span><span class="s1">&#39;textbook&#39;</span><span class="p">)</span>

<span class="c1"># Use the above model to create a COMETS model</span>
<span class="n">test_model</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">model</span><span class="p">(</span><span class="n">test_model</span><span class="p">)</span>

<span class="c1"># Change comets specific parameters, e.g. the initial biomass of the model</span>
<span class="c1"># Notre </span>
<span class="n">test_model</span><span class="o">.</span><span class="n">initial_pop</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1e-7</span><span class="p">]</span> 
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Using license file /home/djordje/gurobi.lic
Academic license - for non-commercial use only
</pre></div>
</div>
</section>
<section id="setting-comets-simulation-parameters">
<h2>Setting <code class="docutils literal notranslate"><span class="pre">COMETS</span></code> simulation parameters<a class="headerlink" href="#setting-comets-simulation-parameters" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">COMETS</span></code> simulation parameters are stored in the <code class="docutils literal notranslate"><span class="pre">params</span></code> class, which contains just a <code class="docutils literal notranslate"><span class="pre">dict</span></code> object with the parameter names and values. If we initialize the class without arguments, it will contain the default parameter values (see <a class="reference internal" href="#"><span class="xref myst">here</span></a>). Once loaded, the parameter values can be visualized and modified as desired.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a parameters object with default values </span>
<span class="n">my_params</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">params</span><span class="p">()</span>

<span class="c1"># Change the value of a parameter, for example number of simulation cycles</span>
<span class="n">my_params</span><span class="o">.</span><span class="n">set_param</span><span class="p">(</span><span class="s1">&#39;maxCycles&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="c1"># Set some writeTotalBiomassLog parameter to True, in order to save the output</span>
<span class="n">my_params</span><span class="o">.</span><span class="n">set_param</span><span class="p">(</span><span class="s1">&#39;writeTotalBiomassLog&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

<span class="c1"># See avaliable parameters and their values</span>
<span class="n">my_params</span><span class="o">.</span><span class="n">show_params</span><span class="p">()</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>VALUE</th>
      <th>UNITS</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>BiomassLogName</th>
      <td>biomass.txt</td>
      <td></td>
    </tr>
    <tr>
      <th>BiomassLogRate</th>
      <td>1</td>
      <td>cycles</td>
    </tr>
    <tr>
      <th>FluxLogName</th>
      <td>flux_out</td>
      <td></td>
    </tr>
    <tr>
      <th>FluxLogRate</th>
      <td>5</td>
      <td>cycles</td>
    </tr>
    <tr>
      <th>MediaLogName</th>
      <td>media_out</td>
      <td></td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>writeBiomassLog</th>
      <td>False</td>
      <td>logical</td>
    </tr>
    <tr>
      <th>writeFluxLog</th>
      <td>False</td>
      <td>logical</td>
    </tr>
    <tr>
      <th>writeMediaLog</th>
      <td>False</td>
      <td>logical</td>
    </tr>
    <tr>
      <th>writeSpecificMediaLog</th>
      <td>False</td>
      <td>logical</td>
    </tr>
    <tr>
      <th>writeTotalBiomassLog</th>
      <td>True</td>
      <td>logical</td>
    </tr>
  </tbody>
</table>
<p>62 rows × 2 columns</p>
</div>
<section id="preparing-a-comets-simulation-layout">
<h3>Preparing a <code class="docutils literal notranslate"><span class="pre">COMETS</span></code> simulation layout<a class="headerlink" href="#preparing-a-comets-simulation-layout" title="Link to this heading"></a></h3>
<p>The layout class describes the characteristics of the environment, i.e. the “world”, including which species (models) are in it. It can be instantiated in empty or using <code class="docutils literal notranslate"><span class="pre">COMETS</span></code> models:</p>
<ul class="simple">
<li><p>If instantiated without arguments (as <code class="docutils literal notranslate"><span class="pre">my_layout</span> <span class="pre">=</span> <span class="pre">c.layout()</span></code>), an empty layout is created with all necessary fields that have to be populated.</p></li>
<li><p>If a layout is instantiated passing a <code class="docutils literal notranslate"><span class="pre">model</span></code> (or several models), it will generate a layout with all metabolites those models can exchange with the environment at zero concentration, plus metals and ions at unlimited concentration (default -1000).</p></li>
</ul>
<p>To examine the different parts of a Comets <code class="docutils literal notranslate"><span class="pre">layout</span></code>, let’s first create one from the above loaded textbook model:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_layout</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">layout</span><span class="p">(</span><span class="n">test_model</span><span class="p">)</span>
</pre></div>
</div>
<p>The layout stores information about the species (<code class="docutils literal notranslate"><span class="pre">my_layout.models</span></code>) and spatial structure (<code class="docutils literal notranslate"><span class="pre">my_layout.grid</span></code>) in the environment. In this case, the model is only the textbook one, and the grid is the default one, which is <span class="math notranslate nohighlight">\(1 \times 1\)</span> i.e. only one cell.</p>
<p>The layout stores also information about the <strong>media</strong> as a pandas dataframe. In this case, no amount of any media component is present.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_layout</span><span class="o">.</span><span class="n">media</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>diff_c</th>
      <th>g_refresh</th>
      <th>g_static</th>
      <th>g_static_val</th>
      <th>init_amount</th>
      <th>metabolite</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>ac_e</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>acald_e</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>akg_e</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>co2_e</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>etoh_e</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>for_e</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>fru_e</td>
    </tr>
    <tr>
      <th>7</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>fum_e</td>
    </tr>
    <tr>
      <th>8</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>glc__D_e</td>
    </tr>
    <tr>
      <th>9</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>gln__L_e</td>
    </tr>
    <tr>
      <th>10</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>glu__L_e</td>
    </tr>
    <tr>
      <th>11</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>h2o_e</td>
    </tr>
    <tr>
      <th>12</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>h_e</td>
    </tr>
    <tr>
      <th>13</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>lac__D_e</td>
    </tr>
    <tr>
      <th>14</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>mal__L_e</td>
    </tr>
    <tr>
      <th>15</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>nh4_e</td>
    </tr>
    <tr>
      <th>16</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>o2_e</td>
    </tr>
    <tr>
      <th>17</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>pi_e</td>
    </tr>
    <tr>
      <th>18</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>pyr_e</td>
    </tr>
    <tr>
      <th>19</th>
      <td>0.000005</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>succ_e</td>
    </tr>
  </tbody>
</table>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>metabolite</p></th>
<th class="head"><p>init_amount</p></th>
<th class="head"><p>diff_c</p></th>
<th class="head"><p>g_static</p></th>
<th class="head"><p>g_static_val</p></th>
<th class="head"><p>g_refresh_val</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ca2_e</p></td>
<td><p>1000</p></td>
<td><p>NaN</p></td>
<td><p>1</p></td>
<td><p>1000</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>cbl_e</p></td>
<td><p>1000</p></td>
<td><p>NaN</p></td>
<td><p>1</p></td>
<td><p>1000</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>cl_e</p></td>
<td><p>1000</p></td>
<td><p>NaN</p></td>
<td><p>1</p></td>
<td><p>1000</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
</tr>
</tbody>
</table>
<p>When initiated from models, the media compounds that can be in the environment are all those for which there is an exchange reaction in at least one of the models. The media, shown in the table above, is a <code class="docutils literal notranslate"><span class="pre">pandas</span></code> dataframe where several pieces of information are stored:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">init_amount</span></code> is the initial amount to be added to each cell of the simulation grid (in mmol).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">diff_c</span></code> indicates whether the molecule has a diffusion constant different than the default one (stored in <code class="docutils literal notranslate"><span class="pre">ec_layout.global_diff</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">g_static</span></code> indicates whether the component should remain at a static value, i.e. without change due to consumption and other effects of the simulation. This is useful for example, for setting some nutrients as unlimited.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">g_static_val</span></code> indicates at which value shouold the nutrient remain static, if the previous coulmn value is 1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">g_refresh_val</span></code> indicates the amount of the metabolite that should be added after each simulation cycle to each cell of the grid.</p></li>
</ul>
<p>In addition, we can set local <code class="docutils literal notranslate"><span class="pre">static</span></code> and <code class="docutils literal notranslate"><span class="pre">refresh</span></code> values, specific to a cell of the simulation grid.</p>
<p>When a media component is <code class="docutils literal notranslate"><span class="pre">static</span></code>, this means that its concentration is returned in each cycle to the set static value. This is used when we want a media component to remain virtually unlimited during a simulation.</p>
<p>When a media component has a <code class="docutils literal notranslate"><span class="pre">refresh</span></code> value, this means it will be replenished by adding the set amount at every simulation cycle.</p>
<p>Local refresh values are stored in a list, <code class="docutils literal notranslate"><span class="pre">my_layout.local_refresh</span></code>, where each element of the list is itself a list with the form <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">x</span>&#160; <span class="pre">y</span>&#160; <span class="pre">m1_r</span>&#160; <span class="pre">m2_r</span>&#160; <span class="pre">m3_r</span> <span class="pre">...</span> <span class="pre">]</span></code>. The first two elements <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> represent the coordinates, and are followed by the refresh values for all metabolites, in the same order as in <code class="docutils literal notranslate"><span class="pre">media</span></code>.</p>
<p>Local static values are stored in a similar way. Each element of the <code class="docutils literal notranslate"><span class="pre">my_layout.local_static</span></code> list is itself a list with the form <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">x</span>&#160; <span class="pre">y</span>&#160; <span class="pre">m1_s</span>&#160; <span class="pre">m1_s_v</span> <span class="pre">m2_s</span>&#160; <span class="pre">m2_s_v</span> <span class="pre">...</span> <span class="pre">]</span></code>. The difference here is that for each metabolite, there are two values, one defining whether the molecule is to be static at that coordinate (<code class="docutils literal notranslate"><span class="pre">m1_s</span></code>, <code class="docutils literal notranslate"><span class="pre">m2_s</span></code>, … ) and another with the value at which it should be kept (<code class="docutils literal notranslate"><span class="pre">m1_s_v</span></code>, <code class="docutils literal notranslate"><span class="pre">m2_s_v</span></code>, … ).</p>
<p>Note that both <code class="docutils literal notranslate"><span class="pre">local_refresh</span></code> and <code class="docutils literal notranslate"><span class="pre">local_static</span></code> can be empty (the default), or contain only entries for the coordinates where there is at least one nonzero refresh or static value, respectively.</p>
<p>Finally, the layout also contains information about the starting biomass of each model. This information is stored in the <code class="docutils literal notranslate"><span class="pre">initial_pop</span></code> list. Each component of <code class="docutils literal notranslate"><span class="pre">initial_pop</span></code> is itself a list with the format <code class="docutils literal notranslate"><span class="pre">[x</span> <span class="pre">y</span> <span class="pre">biomass_1</span> <span class="pre">biomass_2</span> <span class="pre">...]</span></code>specifying the amount of biomass of each model in each coordinate.</p>
</section>
<section id="running-a-comets-simulation">
<h3>Running a <code class="docutils literal notranslate"><span class="pre">COMETS</span></code> simulation<a class="headerlink" href="#running-a-comets-simulation" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">comets</span></code> class uses a layout object and a parameters object to run simulations and store the output. Running a comets simulation is pretty straightforward. We firstly define the <code class="docutils literal notranslate"><span class="pre">comets</span></code> object by passing it a <code class="docutils literal notranslate"><span class="pre">layout</span></code> and a <code class="docutils literal notranslate"><span class="pre">params</span></code> objects as arguments. Then, we <code class="docutils literal notranslate"><span class="pre">run()</span></code> the simulation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_simulation</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">comets</span><span class="p">(</span><span class="n">my_layout</span><span class="p">,</span> <span class="n">my_params</span><span class="p">)</span>
<span class="n">my_simulation</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Running COMETS simulation ...
Done!
</pre></div>
</div>
</section>
<section id="checking-simulation-output-and-possible-errors">
<h3>Checking simulation output and possible errors<a class="headerlink" href="#checking-simulation-output-and-possible-errors" title="Link to this heading"></a></h3>
<p>In the background, this command invokes the <code class="docutils literal notranslate"><span class="pre">COMETS</span></code> Java engine in a console, giving a standard output (stdout) and standard error (stderr) logs. Both can be acessed through the fields <code class="docutils literal notranslate"><span class="pre">run_outputs</span></code> and <code class="docutils literal notranslate"><span class="pre">run_errors</span></code>, respectively.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">my_simulation</span><span class="o">.</span><span class="n">run_output</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-script
running script file: /home/djordje/Dropbox/projects/comets_paper/Methods_Paper_Materials/COMETS_Examples/COMETS_getting_started/Python/.current_script
Current Java version: 11.0.7
Loading layout file &#39;/home/djordje/Dropbox/projects/comets_paper/Methods_Paper_Materials/COMETS_Examples/COMETS_getting_started/Python/.current_layout&#39;...
Found 1 model files!
Loading &#39;/home/djordje/Dropbox/projects/comets_paper/Methods_Paper_Materials/COMETS_Examples/COMETS_getting_started/Python/e_coli_core.cmd&#39; ...
Loading &#39;/home/djordje/Dropbox/projects/comets_paper/Methods_Paper_Materials/COMETS_Examples/COMETS_getting_started/Python/e_coli_core.cmd&#39; ...
Academic license - for non-commercial use only
Academic license - for non-commercial use only
Done!
 Testing default parameters...
Done!
Optimizer status code = 5 (looks ok!)
objective solution = 0.8739215069684305
Constructing world...
Done!
medialist	ac_e	acald_e	akg_e	co2_e	etoh_e	for_e	fru_e	fum_e	glc__D_e	gln__L_e	glu__L_e	h2o_e	h_e	lac__D_e	mal__L_e	nh4_e	o2_e	pi_e	pyr_e	succ_e
Cycle 1
Total biomass:
Model e_coli_core.cmd: 1.0E-7
Cycle 2
Total biomass:
Model e_coli_core.cmd: 1.0E-7
...
Total time = 0.312s
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">my_simulation</span><span class="o">.</span><span class="n">run_errors</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>STDERR empty.
</pre></div>
</div>
</section>
<section id="accessing-the-results-of-the-simulation">
<h3>Accessing the results of the simulation<a class="headerlink" href="#accessing-the-results-of-the-simulation" title="Link to this heading"></a></h3>
<p>The results of the successful simulation are stored in several fields in the <code class="docutils literal notranslate"><span class="pre">comets</span></code> object, depending on whether the parameters <code class="docutils literal notranslate"><span class="pre">writeTotalBiomasslog</span></code>,  <code class="docutils literal notranslate"><span class="pre">writeBiomassLog</span></code>, <code class="docutils literal notranslate"><span class="pre">writeFluxLog</span></code> and <code class="docutils literal notranslate"><span class="pre">writeMediaLog</span></code> were set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<ul class="simple">
<li><p>The field <code class="docutils literal notranslate"><span class="pre">total_biomass</span></code>  stores the total biomass (summed up over all coordinates) for each timepoint and species.</p></li>
<li><p>The field <code class="docutils literal notranslate"><span class="pre">biomass</span></code> stores detailed biomass values for each timepoint, coordinate and species.</p></li>
<li><p>The field <code class="docutils literal notranslate"><span class="pre">media</span></code> stores the composition of the media at each timepoint.</p></li>
<li><p>The field <code class="docutils literal notranslate"><span class="pre">fluxes</span></code> stores the metabolic fluxes for each species, coordinate and timepoint.</p></li>
</ul>
<p>Additionally, specific comets modes will have additional output fields; for instance, if we run an evolution simulation, the field <code class="docutils literal notranslate"><span class="pre">genotypes</span></code> will store information about each species such as its ancestor and which mutation it suffered.</p>
<p>All of the output files ae <code class="docutils literal notranslate"><span class="pre">pandas</span></code> dataframes which can be further analyzed or plotted using standard Python tools.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_simulation</span><span class="o">.</span><span class="n">total_biomass</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>cycle</th>
      <th>e_coli_core</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.0</td>
      <td>1.000000e-07</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.0</td>
      <td>1.000000e-07</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2.0</td>
      <td>1.000000e-07</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3.0</td>
      <td>1.000000e-07</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4.0</td>
      <td>1.000000e-07</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>96</th>
      <td>96.0</td>
      <td>1.000000e-07</td>
    </tr>
    <tr>
      <th>97</th>
      <td>97.0</td>
      <td>1.000000e-07</td>
    </tr>
    <tr>
      <th>98</th>
      <td>98.0</td>
      <td>1.000000e-07</td>
    </tr>
    <tr>
      <th>99</th>
      <td>99.0</td>
      <td>1.000000e-07</td>
    </tr>
    <tr>
      <th>100</th>
      <td>100.0</td>
      <td>1.000000e-07</td>
    </tr>
  </tbody>
</table>
<p>101 rows × 2 columns</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="capabilities.html" class="btn btn-neutral float-left" title="COMETS Capabilities" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="test_tube.html" class="btn btn-neutral float-right" title="Growth in a test tube" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, The Segre Lab at Boston University.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>